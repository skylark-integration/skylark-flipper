/**
 * skylark-flipster - A version of flipster.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-flipster/
 * @license MIT
 */
!function(t,e){var n=e.define,require=e.require,r="function"==typeof n&&n.amd,i=!r&&"undefined"!=typeof exports;if(!r&&!n){var a={};n=e.define=function(t,e,n){"function"==typeof n?(a[t]={factory:n,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var n=e.split("/"),r=t.split("/");n.pop();for(var i=0;i<r.length;i++)"."!=r[i]&&(".."==r[i]?n.pop():n.push(r[i]));return n.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):a[t]={factory:null,resolved:!0,exports:n}},require=e.require=function(t){if(!a.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=a[t];if(!module.resolved){var n=[];module.deps.forEach(function(t){n.push(require(t))}),module.exports=module.factory.apply(e,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-flipster/flipster",["skylark-jquery"],function(t){"use strict";function e(t,e){var n=null;return function(){var r=this,i=arguments;null===n&&(n=setTimeout(function(){t.apply(r,i),n=null},e))}}var n,r=(n={},function(t){if(void 0!==n[t])return n[t];var e=document.createElement("div"),r=e.style,i=t.charAt(0).toUpperCase()+t.slice(1),a=(t+" "+["webkit","moz","ms","o"].join(i+" ")+i).split(" ");for(var o in a)if(a[o]in r)return n[t]=a[o];return n[t]=!1}),i="http://www.w3.org/2000/svg",a=function(){var t;return function(){if(void 0!==t)return t;var e=document.createElement("div");return e.innerHTML="<svg/>",t=e.firstChild&&e.firstChild.namespaceURI===i}}(),o=t(window),s=r("transform"),l={itemContainer:"ul",itemSelector:"li",start:"center",fadeIn:400,loop:!1,autoplay:!1,pauseOnHover:!0,style:"coverflow",spacing:-.6,click:!0,keyboard:!0,scrollwheel:!0,touch:!0,nav:!1,buttons:!1,buttonPrev:"Previous",buttonNext:"Next",onItemSwitch:!1},u={main:"flipster",active:"flipster--active",container:"flipster__container",nav:"flipster__nav",navChild:"flipster__nav__child",navItem:"flipster__nav__item",navLink:"flipster__nav__link",navCurrent:"flipster__nav__item--current",navCategory:"flipster__nav__item--category",navCategoryLink:"flipster__nav__link--category",button:"flipster__button",buttonPrev:"flipster__button--prev",buttonNext:"flipster__button--next",item:"flipster__item",itemCurrent:"flipster__item--current",itemPast:"flipster__item--past",itemFuture:"flipster__item--future",itemContent:"flipster__item__content"},c=new RegExp("\\b("+u.itemCurrent+"|"+u.itemPast+"|"+u.itemFuture+")(.*?)(\\s|$)","g"),f=new RegExp("\\s\\s+","g");return t.fn.flipster=function(n){var r="string"==typeof n;if(r){var p=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=t(this).data("methods");return e[n]?e[n].apply(this,p):this})}var v=t.extend({},l,n);return this.each(function(){var n,r,l,p,h,d,m,g,y,_=t(this),x=[],b=0,k=!1,w=!1;function C(e){return e=e||"next",t('<button class="'+u.button+" "+("next"===e?u.buttonNext:u.buttonPrev)+'" role="button" />').html(function(t){var e="next"===t?v.buttonNext:v.buttonPrev;if("custom"===v.buttons||!a)return e;return'<svg viewBox="0 0 13 20" xmlns="'+i+'" aria-labelledby="title"><title>'+e+'</title><polyline points="10,3 3,10 10,17"'+("next"===t?' transform="rotate(180 6.5,10)"':"")+"/></svg>"}(e)).on("click",function(t){j(e),t.preventDefault()})}function I(){_.css("transition",""),r.css("transition",""),h.css("transition","")}function E(e){var n,i;e&&(_.css("transition","none"),r.css("transition","none"),h.css("transition","none")),l=r.width(),r.height((i=0,h.each(function(){(n=t(this).height())>i&&(i=n)}),i)),l?(p&&(clearInterval(p),p=!1),h.each(function(n){var r,i,a=t(this);a.attr("class",function(t,e){return e&&e.replace(c,"").replace(f," ")}),r=a.outerWidth(),0!==v.spacing&&a.css("margin-right",r*v.spacing+"px"),i=a.position().left,x[n]=-1*(i+r/2-l/2),n===h.length-1&&(P(),e&&setTimeout(I,1))})):p=p||setInterval(function(){E(e)},500)}function P(){var e,n,i,a=h.length;h.each(function(r){e=t(this),n=" ",r===b?(n+=u.itemCurrent,i=a+1):r<b?(n+=u.itemPast+" "+u.itemPast+"-"+(b-r),i=a-(b-r)):(n+=u.itemFuture+" "+u.itemFuture+"-"+(r-b),i=a-(r-b)),e.css("z-index",i).attr("class",function(t,e){return e&&e.replace(c,"").replace(f," ")+n})}),b>=0&&(l&&void 0!==x[b]||E(!0),s?r.css("transform","translateX("+x[b]+"px)"):r.css({left:x[b]+"px"})),function(){if(v.nav){var e=d.data("flip-category");g.removeClass(u.navCurrent),y.filter(function(){return t(this).data("index")===b||e&&t(this).data("category")===e}).parent().addClass(u.navCurrent)}}()}function j(t){var e=b;if(!(h.length<=1))return"prev"===t?b>0?b--:v.loop&&(b=h.length-1):"next"===t?b<h.length-1?b++:v.loop&&(b=0):"number"==typeof t?b=t:void 0!==t&&(b=h.index(t),v.loop&&e!=b&&(e==h.length-1&&b!=h.length-2&&(b=0),0==e&&1!=b&&(b=h.length-1))),d=h.eq(b),b!==e&&v.onItemSwitch&&v.onItemSwitch.call(_,h[b],h[e]),P(),_}function L(t){return v.autoplay=t||v.autoplay,clearInterval(k),k=setInterval(function(){var t=b;j("next"),t!==b||v.loop||clearInterval(k)},v.autoplay),_}function M(){return clearInterval(k),k=0,_}function T(t){return M(),v.autoplay&&t&&(k=-1),_}function D(){E(!0),_.hide().css("visibility","").addClass(u.active).fadeIn(v.fadeIn)}function X(){if(r=_.find(v.itemContainer).addClass(u.container),!((h=r.find(v.itemSelector)).length<=1))return h.addClass(u.item).each(function(){var e=t(this);e.children("."+u.itemContent).length||e.wrapInner('<div class="'+u.itemContent+'" />')}),v.click&&h.on("click.flipster touchend.flipster",function(e){w||(t(this).hasClass(u.itemCurrent)||e.preventDefault(),j(this))}),v.buttons&&h.length>1&&(_.find("."+u.button).remove(),_.append(C("prev"),C("next"))),function(){var e={};if(!v.nav||h.length<=1)return;m&&m.remove();m=t('<ul class="'+u.nav+'" role="navigation" />'),y=t(""),h.each(function(n){var r=t(this),i=r.data("flip-category"),a=r.data("flip-title")||r.attr("title")||n,o=t('<a href="#" class="'+u.navLink+'">'+a+"</a>").data("index",n);if(y=y.add(o),i){if(!e[i]){var s=t('<li class="'+u.navItem+" "+u.navCategory+'">'),l=t('<a href="#" class="'+u.navLink+" "+u.navCategoryLink+'" data-flip-category="'+i+'">'+i+"</a>").data("category",i).data("index",n);e[i]=t('<ul class="'+u.navChild+'" />'),y=y.add(l),s.append(l,e[i]).appendTo(m)}e[i].append(o)}else m.append(o);o.wrap('<li class="'+u.navItem+'">')}),m.on("click","a",function(e){var n=t(this).data("index");n>=0&&(j(n),e.preventDefault())}),"after"===v.nav?_.append(m):_.prepend(m);g=m.find("."+u.navItem)}(),b>=0&&j(b),_}n={jump:j,next:function(){return j("next")},prev:function(){return j("prev")},play:L,stop:M,pause:T,index:X},_.data("methods",n),_.hasClass(u.active)||function(){var t;if(_.css("visibility","hidden"),X(),h.length<=1)return void _.css("visibility","");t=!!v.style&&"flipster--"+v.style.split(" ").join(" flipster--"),_.addClass([u.main,s?"flipster--transform":" flipster--no-transform",t,v.click?"flipster--click":""].join(" ")),v.start&&(b="center"===v.start?Math.floor(h.length/2):v.start);j(b);var n=_.find("img");if(n.length){var i=0;n.on("load",function(){++i>=n.length&&D()}),setTimeout(D,750)}else D();o.on("resize.flipster",e(E,400)),v.autoplay&&L();v.pauseOnHover&&r.on("mouseenter.flipster",function(){k?T(!0):M()}).on("mouseleave.flipster",function(){-1===k&&L()});a=_,v.keyboard&&(a[0].tabIndex=0,a.on("keydown.flipster",e(function(t){var e=t.which;37!==e&&39!==e||(j(37===e?"prev":"next"),t.preventDefault())},250))),function(t){if(v.scrollwheel){var n,r,i=!1,a=0,s=0,l=0,u=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase());t.on("mousewheel.flipster wheel.flipster",function(){i=!0}).on("mousewheel.flipster wheel.flipster",e(function(t){clearTimeout(s),s=setTimeout(function(){a=0,l=0},300),t=t.originalEvent,l+=t.wheelDelta||-1*(t.deltaY+t.deltaX),Math.abs(l)<25&&!u||(a++,r!==(n=l>0?"prev":"next")&&(a=0),r=n,(a<6||a%3==0)&&j(n),l=0)},50)),o.on("mousewheel.flipster wheel.flipster",function(t){i&&(t.preventDefault(),i=!1)})}}(r),function(t){var e,n,r,i,a,o;v.touch&&t.on({"touchstart.flipster":function(t){t=t.originalEvent,e=t.touches?t.touches[0].clientX:t.clientX,n=t.touches?t.touches[0].clientY:t.clientY},"touchmove.flipster":function(t){t=t.originalEvent,r=t.touches?t.touches[0].clientX:t.clientX,i=t.touches?t.touches[0].clientY:t.clientY,o=r-e,a=i-n,Math.abs(o)>30&&Math.abs(a)<100&&t.preventDefault()},"touchend.flipster touchcancel.flipster ":function(){o=r-e,a=i-n,Math.abs(o)>30&&Math.abs(a)<100&&j(o>0?"prev":"next")}})}(r);var a}()})},t}),t("skylark-flipster/main",["./flipster"],function(t){return t}),t("skylark-flipster",["skylark-flipster/main"],function(t){return t})}(n),!r){var o=require("skylark-langx/skylark");i?module.exports=o:e.skylarkjs=o}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-flipster.js.map
