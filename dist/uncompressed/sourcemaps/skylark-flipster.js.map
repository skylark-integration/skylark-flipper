{"version":3,"sources":["skylark-flipster.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../skylark-flipster.js","sourcesContent":["define('skylark-flipster/flipster',[\n    \"skylark-jquery\"\n],function($) {\n\n\n    'use strict';\n\n    function throttle(func, delay) {\n        var timer = null;\n\n        return function() {\n            var context = this,\n                args = arguments;\n\n            if ( timer === null ) {\n                timer = setTimeout(function() {\n                    func.apply(context, args);\n                    timer = null;\n                }, delay);\n            }\n        };\n    }\n\n    // Check for browser CSS support and cache the result for subsequent calls.\n    var checkStyleSupport = (function() {\n        var support = {};\n        return function(prop) {\n            if ( support[prop] !== undefined ) { return support[prop]; }\n\n            var div = document.createElement('div'),\n                style = div.style,\n                ucProp = prop.charAt(0).toUpperCase() + prop.slice(1),\n                prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"],\n                props = (prop + ' ' + (prefixes).join(ucProp + ' ') + ucProp).split(' ');\n\n            for (var i in props) {\n                if ( props[i] in style ) { return support[prop] = props[i]; }\n            }\n\n            return support[prop] = false;\n        };\n    }());\n\n    var svgNS = 'http://www.w3.org/2000/svg',\n        svgSupport = (function() {\n            var support;\n            return function() {\n                if ( support !== undefined ) { return support; }\n                var div = document.createElement('div');\n                div.innerHTML = '<svg/>';\n                support = ( div.firstChild && div.firstChild.namespaceURI === svgNS );\n                return support;\n            };\n        }());\n\n    var $window = $(window),\n\n        transformSupport = checkStyleSupport('transform'),\n\n        defaults = {\n            itemContainer: 'ul',\n            // [string|object]\n            // Selector for the container of the flippin' items.\n\n            itemSelector: 'li',\n            // [string|object]\n            // Selector for children of `itemContainer` to flip\n\n            start: 'center',\n            // ['center'|number]\n            // Zero based index of the starting item, or use 'center' to start in the middle\n\n            fadeIn: 400,\n            // [milliseconds]\n            // Speed of the fade in animation after items have been setup\n\n            loop: false,\n            // [true|false]\n            // Loop around when the start or end is reached\n\n            autoplay: false,\n            // [false|milliseconds]\n            // If a positive number, Flipster will automatically advance to next item after that number of milliseconds\n\n            pauseOnHover: true,\n            // [true|false]\n            // If true, autoplay advancement will pause when Flipster is hovered\n\n            style: 'coverflow',\n            // [coverflow|carousel|flat|...]\n            // Adds a class (e.g. flipster--coverflow) to the flipster element to switch between display styles\n            // Create your own theme in CSS and use this setting to have Flipster add the custom class\n\n            spacing: -0.6,\n            // [number]\n            // Space between items relative to each item's width. 0 for no spacing, negative values to overlap\n\n            click: true,\n            // [true|false]\n            // Clicking an item switches to that item\n\n            keyboard: true,\n            // [true|false]\n            // Enable left/right arrow navigation\n\n            scrollwheel: true,\n            // [true|false]\n            // Enable mousewheel/trackpad navigation; up/left = previous, down/right = next\n\n            touch: true,\n            // [true|false]\n            // Enable swipe navigation for touch devices\n\n            nav: false,\n            // [true|false|'before'|'after']\n            // If not false, Flipster will build an unordered list of the items\n            // Values true or 'before' will insert the navigation before the items, 'after' will append the navigation after the items\n\n            buttons: false,\n            // [true|false|'custom']\n            // If true, Flipster will insert Previous / Next buttons with SVG arrows\n            // If 'custom', Flipster will not insert the arrows and will instead use the values of `buttonPrev` and `buttonNext`\n\n            buttonPrev: 'Previous',\n            // [text|html]\n            // Changes the text for the Previous button\n\n            buttonNext: 'Next',\n            // [text|html]\n            // Changes the text for the Next button\n\n            onItemSwitch: false\n            // [function]\n            // Callback function when items are switched\n            // Arguments received: [currentItem, previousItem]\n        },\n\n        classes = {\n            main: 'flipster',\n            active: 'flipster--active',\n            container: 'flipster__container',\n\n            nav: 'flipster__nav',\n            navChild: 'flipster__nav__child',\n            navItem: 'flipster__nav__item',\n            navLink: 'flipster__nav__link',\n            navCurrent: 'flipster__nav__item--current',\n            navCategory: 'flipster__nav__item--category',\n            navCategoryLink: 'flipster__nav__link--category',\n\n            button: 'flipster__button',\n            buttonPrev: 'flipster__button--prev',\n            buttonNext: 'flipster__button--next',\n\n            item: 'flipster__item',\n            itemCurrent: 'flipster__item--current',\n            itemPast: 'flipster__item--past',\n            itemFuture: 'flipster__item--future',\n            itemContent: 'flipster__item__content'\n        },\n\n        classRemover = new RegExp('\\\\b(' + classes.itemCurrent + '|' + classes.itemPast + '|' + classes.itemFuture + ')(.*?)(\\\\s|$)', 'g'),\n        whiteSpaceRemover = new RegExp('\\\\s\\\\s+', 'g');\n\n    $.fn.flipster = function(options) {\n        var isMethodCall = (typeof options === 'string' ? true : false);\n\n        if ( isMethodCall ) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            return this.each(function() {\n                var methods = $(this).data('methods');\n                if ( methods[options] ) {\n                    return methods[options].apply(this, args);\n                } else {\n                    return this;\n                }\n            });\n        }\n\n        var settings = $.extend({}, defaults, options);\n\n        return this.each(function() {\n\n            var self = $(this),\n                methods,\n\n                _container,\n                _containerWidth,\n                _resizeInterval,\n\n                _items,\n                _itemOffsets = [],\n                _currentItem,\n                _currentIndex = 0,\n\n                _nav,\n                _navItems,\n                _navLinks,\n\n                _playing = false,\n                _startDrag = false;\n\n            function buildButtonContent(dir) {\n                var text = ( dir === 'next' ? settings.buttonNext : settings.buttonPrev );\n\n                if ( settings.buttons === 'custom' || !svgSupport ) { return text; }\n\n                return '<svg viewBox=\"0 0 13 20\" xmlns=\"' + svgNS + '\" aria-labelledby=\"title\"><title>' + text + '</title><polyline points=\"10,3 3,10 10,17\"' + (dir === 'next' ? ' transform=\"rotate(180 6.5,10)\"' : '') + '/></svg>';\n            }\n\n            function buildButton(dir) {\n                dir = dir || 'next';\n\n                return $('<button class=\"' + classes.button + ' ' + ( dir === 'next' ? classes.buttonNext : classes.buttonPrev ) + '\" role=\"button\" />')\n                    .html(buildButtonContent(dir))\n                    .on('click', function(e) {\n                        jump(dir);\n                        e.preventDefault();\n                    });\n\n            }\n\n            function buildButtons() {\n                if ( settings.buttons && _items.length > 1 ) {\n                    self.find('.' + classes.button).remove();\n                    self.append(buildButton('prev'), buildButton('next'));\n                }\n            }\n\n            function buildNav() {\n                var navCategories = {};\n\n                if ( !settings.nav || _items.length <= 1 ) { return; }\n\n                if ( _nav ) { _nav.remove(); }\n\n                _nav = $('<ul class=\"' + classes.nav + '\" role=\"navigation\" />');\n                _navLinks = $('');\n\n                _items.each(function(i) {\n                    var item = $(this),\n                        category = item.data('flip-category'),\n                        itemTitle = item.data('flip-title') || item.attr('title') || i,\n                        navLink = $('<a href=\"#\" class=\"' + classes.navLink + '\">' + itemTitle + '</a>')\n                        .data('index', i);\n\n                    _navLinks = _navLinks.add(navLink);\n\n                    if ( category ) {\n\n                        if ( !navCategories[category] ) {\n\n                            var categoryItem = $('<li class=\"' + classes.navItem + ' ' + classes.navCategory + '\">');\n                            var categoryLink = $('<a href=\"#\" class=\"' + classes.navLink + ' ' + classes.navCategoryLink + '\" data-flip-category=\"' + category + '\">' + category + '</a>')\n                                    .data('category', category)\n                                    .data('index', i);\n\n                            navCategories[category] = $('<ul class=\"' + classes.navChild + '\" />');\n\n                            _navLinks = _navLinks.add(categoryLink);\n\n                            categoryItem\n                                .append(categoryLink, navCategories[category])\n                                .appendTo(_nav);\n                        }\n\n                        navCategories[category].append(navLink);\n                    } else {\n                        _nav.append(navLink);\n                    }\n\n                    navLink.wrap('<li class=\"' + classes.navItem + '\">');\n\n                });\n\n                _nav.on('click', 'a', function(e) {\n                    var index = $(this).data('index');\n                    if ( index >= 0 ) {\n                        jump(index);\n                        e.preventDefault();\n                    }\n                });\n\n                if ( settings.nav === 'after' ) { self.append(_nav); }\n                else { self.prepend(_nav); }\n\n                _navItems = _nav.find('.' + classes.navItem);\n            }\n\n            function updateNav() {\n                if ( settings.nav ) {\n\n                    var category = _currentItem.data('flip-category');\n\n                    _navItems.removeClass(classes.navCurrent);\n\n                    _navLinks\n                        .filter(function() {\n                            return ($(this).data('index') === _currentIndex || (category && $(this).data('category') === category));\n                        })\n                        .parent()\n                        .addClass(classes.navCurrent);\n\n                }\n            }\n\n            function noTransition() {\n                self.css('transition', 'none');\n                _container.css('transition', 'none');\n                _items.css('transition', 'none');\n            }\n\n            function resetTransition() {\n                self.css('transition', '');\n                _container.css('transition', '');\n                _items.css('transition', '');\n            }\n\n            function calculateBiggestItemHeight() {\n                var biggestHeight = 0,\n                    itemHeight;\n\n                _items.each(function() {\n                    itemHeight = $(this).height();\n                    if ( itemHeight > biggestHeight ) { biggestHeight = itemHeight; }\n                });\n                return biggestHeight;\n            }\n\n            function resize(skipTransition) {\n                if ( skipTransition ) { noTransition(); }\n\n                _containerWidth = _container.width();\n                _container.height(calculateBiggestItemHeight());\n\n                // Prevent maximum callstack error. #79 #74\n                if ( !_containerWidth ) {\n                    _resizeInterval = _resizeInterval || setInterval(function(){ resize(skipTransition); },500);\n                    return;\n                } else if ( _resizeInterval ) {\n                    clearInterval(_resizeInterval);\n                    _resizeInterval = false;\n                }\n\n                _items.each(function(i) {\n                    var item = $(this),\n                        width,\n                        left;\n\n                    item.attr('class', function(i, c) {\n                        return c && c.replace(classRemover, '').replace(whiteSpaceRemover, ' ');\n                    });\n\n                    width = item.outerWidth();\n\n                    if ( settings.spacing !== 0 ) {\n                        item.css('margin-right', ( width * settings.spacing ) + 'px');\n                    }\n\n                    left = item.position().left;\n                    _itemOffsets[i] = -1 * ((left + (width / 2)) - (_containerWidth / 2));\n\n                    if ( i === _items.length - 1 ) {\n                        center();\n                        if ( skipTransition ) { setTimeout(resetTransition, 1); }\n                    }\n                });\n            }\n\n            function center() {\n                var total = _items.length;\n                var item;\n                var newClass;\n                var zIndex;\n\n                _items.each(function (i) {\n                    item = $(this);\n                    newClass = ' ';\n\n                    if (i === _currentIndex)\n                    {\n                        newClass += classes.itemCurrent;\n                        zIndex = (total + 1);\n                    }\n                    else if (i < _currentIndex)\n                    {\n                        newClass += classes.itemPast + ' ' +\n                            classes.itemPast + '-' + (_currentIndex - i);\n                        zIndex = total - (_currentIndex - i);\n                    }\n                    else\n                    {\n                        newClass += classes.itemFuture + ' ' +\n                            classes.itemFuture + '-' + (i - _currentIndex);\n                        \n                        zIndex = total -  (i - _currentIndex);\n                    }\n\n                    item.css('z-index', zIndex )\n                      .attr('class',function(i, c){\n                        return c && c.replace(classRemover, '').replace(whiteSpaceRemover,' ') + newClass;\n                      });\n                });\n\n                if ( _currentIndex >= 0 ) {\n                    if ( !_containerWidth || _itemOffsets[_currentIndex] === undefined ) { resize(true); }\n\n                    if ( transformSupport ) {\n                        _container.css('transform', 'translateX(' + _itemOffsets[_currentIndex] + 'px)');\n                    } else {\n                        _container.css({ 'left': _itemOffsets[_currentIndex] + 'px' });\n                    }\n                }\n\n                updateNav();\n            }\n\n            function jump(to) {\n                var _previous = _currentIndex;\n\n                if ( _items.length <= 1 ) { return; }\n\n                if (to === 'prev') {\n                    if ( _currentIndex > 0 ) { _currentIndex--; }\n                    else if ( settings.loop ) { _currentIndex = _items.length - 1; }\n                } else if (to === 'next') {\n                    if ( _currentIndex < _items.length - 1 ) { _currentIndex++; }\n                    else if ( settings.loop ) { _currentIndex = 0; }\n                } else if (typeof to === 'number') {\n                    _currentIndex = to;\n                } else if ( to !== undefined ) {\n                    // if object is sent, get its index\n                    _currentIndex = _items.index(to);\n                    if (settings.loop && _previous != _currentIndex) {\n                        if (_previous == (_items.length - 1) && _currentIndex != (_items.length - 2)) _currentIndex = 0;\n                        if (_previous == 0 && _currentIndex != 1) _currentIndex = (_items.length - 1);\n                    }\n                }\n\n                _currentItem = _items.eq(_currentIndex);\n\n                if ( _currentIndex !== _previous && settings.onItemSwitch ) {\n                    settings.onItemSwitch.call(self, _items[_currentIndex], _items[_previous]);\n                }\n\n                center();\n\n                return self;\n            }\n\n            function play(interval) {\n                settings.autoplay = interval || settings.autoplay;\n\n                clearInterval(_playing);\n\n                _playing = setInterval(function() {\n                    var prev = _currentIndex;\n                    jump('next');\n                    if ( prev === _currentIndex && !settings.loop ) { clearInterval(_playing); }\n                }, settings.autoplay);\n\n                return self;\n            }\n\n            function stop(){\n                clearInterval(_playing);\n                _playing = 0;\n                return self;\n            }\n\n            function pause(forced) {\n                stop();\n                if ( settings.autoplay && forced ) { _playing = -1; }\n                return self;\n            }\n\n            function show() {\n                resize(true);\n                self.hide()\n                    .css('visibility', '')\n                    .addClass(classes.active)\n                    .fadeIn(settings.fadeIn);\n            }\n\n            function index() {\n\n                _container = self.find(settings.itemContainer).addClass(classes.container);\n\n                _items = _container.find(settings.itemSelector);\n\n                if ( _items.length <= 1 ) { return; }\n\n                _items\n                    .addClass(classes.item)\n                    // Wrap inner content\n                    .each(function() {\n                        var item = $(this);\n                        if ( !item.children('.' + classes.itemContent ).length) {\n                            item.wrapInner('<div class=\"' + classes.itemContent + '\" />');\n                        }\n                    });\n\n                // Navigate directly to an item by clicking\n                if ( settings.click ) {\n                    _items.on('click.flipster touchend.flipster', function (e) {\n                        if ( !_startDrag ) {\n                            if ( !$(this).hasClass(classes.itemCurrent) ) { e.preventDefault(); }\n                            jump(this);\n                        }\n                    });\n                }\n\n                // Insert navigation if enabled.\n                buildButtons();\n                buildNav();\n\n                if ( _currentIndex >= 0 ) { jump(_currentIndex); }\n\n                return self;\n            }\n\n            function keyboardEvents(elem) {\n                if ( settings.keyboard ) {\n                    elem[0].tabIndex = 0;\n                    elem.on('keydown.flipster', throttle(function(e) {\n                        var code = e.which;\n                        if ( code === 37 || code === 39 ) {\n                            jump( code === 37 ? 'prev' : 'next' );\n                            e.preventDefault();\n                        }\n                    }, 250, true));\n                }\n            }\n\n            function wheelEvents(elem) {\n                if ( settings.scrollwheel ) {\n                    var _wheelInside = false,\n                        _actionThrottle = 0,\n                        _throttleTimeout = 0,\n                        _delta = 0,\n                        _dir, _lastDir,\n                        _isMozilla = /mozilla/.test(navigator.userAgent.toLowerCase()) && !/webkit/.test(navigator.userAgent.toLowerCase());\n\n                    elem\n                        .on('mousewheel.flipster wheel.flipster', function() { _wheelInside = true; })\n                        .on('mousewheel.flipster wheel.flipster', throttle(function(e) {\n\n                            // Reset after a period without scrolling.\n                            clearTimeout(_throttleTimeout);\n                            _throttleTimeout = setTimeout(function() {\n                                _actionThrottle = 0;\n                                _delta = 0;\n                            }, 300);\n\n                            e = e.originalEvent;\n\n                            // Add to delta (+=) so that continuous small events can still get past the speed limit, and quick direction reversals get cancelled out\n                            _delta += (e.wheelDelta || (e.deltaY + e.deltaX) * -1); // Invert numbers for Firefox\n\n                            // Don't trigger unless the scroll is decent speed.\n                            // There's need to check if _isMozilla because of different working delta in Firefox (in FF scroll delta is less than 25 or more than -25)\n                            if ( Math.abs(_delta) < 25 && ! _isMozilla) { return; }\n\n                            _actionThrottle++;\n\n                            _dir = (_delta > 0 ? 'prev' : 'next');\n\n                            // Reset throttle if direction changed.\n                            if ( _lastDir !== _dir ) { _actionThrottle = 0; }\n                            _lastDir = _dir;\n\n                            // Regular scroll wheels trigger less events, so they don't need to be throttled. Trackpads trigger many events (inertia), so only trigger jump every three times to slow things down.\n                            if ( _actionThrottle < 6 || _actionThrottle % 3 === 0 ) { jump(_dir); }\n\n                            _delta = 0;\n\n                        }, 50));\n\n                    // Disable mousewheel on window if event began in elem.\n                    $window.on('mousewheel.flipster wheel.flipster', function(e) {\n                        if ( _wheelInside ) {\n                            e.preventDefault();\n                            _wheelInside = false;\n                        }\n                    });\n                }\n            }\n\n            function touchEvents(elem) {\n                if (settings.touch) {\n                    var _startDragX, _startDragY, x, y, offsetY, offsetX;\n\n                    elem.on({\n                        'touchstart.flipster': function (e) {\n                            // e.preventDefault();\n                            e = e.originalEvent;\n                            _startDragX = (e.touches ? e.touches[0].clientX : e.clientX);\n                            _startDragY = (e.touches ? e.touches[0].clientY : e.clientY);\n                        },\n\n                        'touchmove.flipster': function (e) {\n                            // e.preventDefault();\n                            e = e.originalEvent;\n                            x = (e.touches ? e.touches[0].clientX : e.clientX);\n                            y = (e.touches ? e.touches[0].clientY : e.clientY);\n                            offsetX = x - _startDragX;\n                            offsetY = y - _startDragY;\n                            if (Math.abs(offsetX) > 30 && Math.abs(offsetY) < 100) {\n                                e.preventDefault();\n                            }\n                        },\n\n                        'touchend.flipster touchcancel.flipster ': function () {\n                            offsetX = x - _startDragX;\n                            offsetY = y - _startDragY;\n                            if (Math.abs(offsetX) > 30 && Math.abs(offsetY) < 100) {\n                                if (offsetX > 0) {\n                                    jump('prev');\n                                }\n                                else {\n                                    jump('next');\n                                }\n                            }\n                        }\n                    });\n                }\n            }\n\n            function init() {\n\n                var style;\n\n                self.css('visibility', 'hidden');\n\n                index();\n\n                if ( _items.length <= 1 ) {\n                    self.css('visibility', '');\n                    return;\n                }\n\n                style = (settings.style ? 'flipster--' + settings.style.split(' ').join(' flipster--') : false);\n\n                self.addClass([\n                    classes.main,\n                    (transformSupport ? 'flipster--transform' : ' flipster--no-transform'),\n                    style, // 'flipster--'+settings.style : '' ),\n                    (settings.click ? 'flipster--click' : '')\n                ].join(' '));\n\n                // Set the starting item\n                if ( settings.start ) {\n                    // Find the middle item if start = center\n                    _currentIndex = ( settings.start === 'center' ? Math.floor(_items.length / 2) : settings.start );\n                }\n\n                jump(_currentIndex);\n\n                var images = self.find('img');\n\n                if ( images.length ) {\n                    var imagesLoaded = 0;\n\n                    // Resize after all images have loaded.\n                    images.on('load', function() {\n                        imagesLoaded++;\n                        if ( imagesLoaded >= images.length ) { show(); }\n                    });\n\n                    // Fallback to show Flipster while images load in case it takes a while.\n                    setTimeout(show, 750);\n                } else {\n                    show();\n                }\n\n                // Attach event bindings.\n                $window.on('resize.flipster', throttle(resize, 400));\n\n                if ( settings.autoplay ) { play(); }\n\n                if ( settings.pauseOnHover ) {\n                    _container\n                        .on('mouseenter.flipster', function(){\n                            if (_playing) { pause(true); }\n                            else { stop() }\n                        })\n                        .on('mouseleave.flipster', function() {\n                            if ( _playing === -1 ) { play(); }\n                        });\n                }\n\n                keyboardEvents(self);\n                wheelEvents(_container);\n                touchEvents(_container);\n            }\n\n            // public methods\n            methods = {\n                jump: jump,\n                next: function() { return jump('next'); },\n                prev: function() { return jump('prev'); },\n                play: play,\n                stop: stop,\n                pause: pause,\n                index: index\n            };\n            self.data('methods', methods);\n\n            // Initialize if flipster is not already active.\n            if ( !self.hasClass(classes.active) ) { init(); }\n        });\n    };\n\n    return $;\n});\n\ndefine('skylark-flipster/main',[\r\n\t\"./flipster\"\r\n],function(flipster) {\r\n\treturn flipster;\r\n});\ndefine('skylark-flipster', ['skylark-flipster/main'], function (main) { return main; });\n\n"]}